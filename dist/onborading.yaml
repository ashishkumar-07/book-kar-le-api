openapi: 3.0.1
info:
  title: MovieManagement
  version: '0.1'
  description: Onboarding and management service
servers:
  - url: http://localhost:8080/management
    description: Generated server url
paths:
  /theatres:
    post:
      tags:
        - theatre-api-impl
      summary: This API onboards a theatre
      operationId: onboardTheatre
      parameters:
        - name: theatreOnboardingRequest
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/TheatreOnboardingRequest'
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/Theatre'
  /shows:
    post:
      tags:
        - show-api-impl
      summary: This API onboards a show of a movie along-with available seats
      operationId: onbaordShow
      parameters:
        - name: showOnboardingRequest
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/ShowOnboardingRequest'
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/Show'
  /partners:
    post:
      tags:
        - theatre-partner-api-impl
      summary: This API onboards a partner
      operationId: onboardPartner
      parameters:
        - name: partnerOnboardingRequest
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/PartnerOnboardingRequest'
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/TheatrePartner'
  /auditoriums:
    post:
      tags:
        - auditorium-api-impl
      summary: Onboarding an auditorium
      operationId: onboardAuditorium
      parameters:
        - name: auditoriumOnboardingRequest
          in: query
          required: true
          schema:
            $ref: '#/components/schemas/AuditoriumOnboardingRequest'
      responses:
        '200':
          description: OK
          content:
            '*/*':
              schema:
                $ref: '#/components/schemas/Auditorium'
  /shows/{externalShowId}:
    delete:
      tags:
        - show-api-impl
      summary: Cancel a show of a movie
      operationId: cancelShow
      parameters:
        - name: externalShowId
          in: path
          required: true
          schema:
            type: string
      responses:
        '200':
          description: OK
components:
  schemas:
    TheatreOnboardingRequest:
      required:
        - externalTheatreId
        - theatreName
      type: object
      properties:
        theatreName:
          type: string
        city_id:
          type: integer
          format: int64
        address:
          type: string
        externalTheatreId:
          type: string
    Theatre:
      type: object
      properties:
        theatreId:
          type: integer
          format: int64
        theatreName:
          type: string
        cityId:
          type: integer
          format: int64
        address:
          type: string
        theatrePartnerId:
          type: integer
          format: int64
        externalTheatrePartnerId:
          type: string
    ShowOnboardingRequest:
      required:
        - priceTierOne
        - priceTierThree
        - priceTierTwo
      type: object
      properties:
        partnerAuditoriumId:
          type: integer
          format: int64
        externalTheaterId:
          type: integer
          format: int64
        externalMovieId:
          type: integer
          format: int64
        showTime:
          type: string
          format: date-time
        priceTierOne:
          type: number
        priceTierTwo:
          type: number
        priceTierThree:
          type: number
        showSeats:
          type: array
          items:
            $ref: '#/components/schemas/ShowSeatOnboardingInfo'
    ShowSeatOnboardingInfo:
      required:
        - rowNumber
        - seatNumber
        - seatStatus
      type: object
      properties:
        rowNumber:
          type: string
        seatNumber:
          type: string
        seatStatus:
          type: string
          enum:
            - AVAILABLE
            - NOT_AVAILABLE
        tier:
          type: string
          enum:
            - TIER1
            - TIER2
    Show:
      type: object
      properties:
        showId:
          type: integer
          format: int64
        externalShowId:
          type: string
        auditoriumId:
          type: integer
          format: int64
        theaterId:
          type: integer
          format: int64
        movieId:
          type: integer
          format: int64
        language:
          type: string
        showDate:
          type: string
          format: date
        showTime:
          type: string
          format: date-time
        priceTierOne:
          type: number
        priceTierTwo:
          type: number
        priceTierThree:
          type: number
    PartnerOnboardingRequest:
      required:
        - name
      type: object
      properties:
        name:
          type: string
        phoneNumber:
          type: string
    TheatrePartner:
      type: object
      properties:
        theatrePartnerId:
          type: integer
          format: int64
        name:
          type: string
        phoneNumber:
          type: string
    AuditoriumOnboardingRequest:
      required:
        - auditoriumName
        - externalTheatreId
        - seats
      type: object
      properties:
        auditoriumName:
          type: string
        externalTheatreId:
          type: string
        seatingCapacity:
          type: integer
          format: int32
        seats:
          type: array
          items:
            $ref: '#/components/schemas/SeatOnboardingDetail'
    SeatOnboardingDetail:
      required:
        - rowNumber
        - seatNumber
      type: object
      properties:
        rowNumber:
          type: string
        seatNumber:
          type: string
        tier:
          type: string
          enum:
            - TIER1
            - TIER2
    Auditorium:
      type: object
      properties:
        auditoriumId:
          type: integer
          format: int64
        auditoriumName:
          type: string
        externalAuditoriumId:
          type: string
        theatreId:
          type: integer
          format: int64
        seatingCapacity:
          type: integer
          format: int32
